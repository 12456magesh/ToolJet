---
id: working-with-queries
title: Working With Queries
---


Queries allow us to fetch or manipulate data present in the data sources. Queries are created on application level. When we set up a data source in ToolJet, it is available throughout the workspace. But a query is only available in the application in which it is created. 

We can find the **Query Panel** at the bottom in the App-Builder. The Query Panel is divided into two parts - **Query Manager** and **Query Editor**. The Query Manager displays a list of queries that have been created within the current application. On the other hand, the Query Editor allows us to construct queries either through low-code methods or by writing them out manually.

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/query-panel.png" alt="Visibility Condition Demo" />
</div>

## Fetching Data

For our fetch data example, we'll select **REST API** as the data source. Leave the Method as **GET** and paste the below REST API link under URL:

```js
https://dummyjson.com/products
```

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/rest-api-query.gif" alt="Rest API Query" />
</div>

Rename the query to *getProducts*. Each query should have a unique name. We can rename the query by clicking on the edit button next to the query name in the Query Manager or by clicking on the query name at the top-left in the Query Editor. 

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/rename-queries.png" alt="Rename Queries" />
</div>

Click on the **Run** button to fetch the data. To see the preview of the returned data, press on the **Preview** button in the **Query Panel**. 

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/run-and-preview.gif" alt="Run And Preview" />
</div>

Now we can see the returned data in the Preview window. This returned data can be used in components to display data.

## Running The Query On Application Load

Enabling the **Run this query on load?** setting ensures that the query runs automatically every time the application launches. This feature is often used for queries that are used to fetch data. 

For instance, if we have a query that is used to fill a Table component with data, activating this setting will:
- Run the query when the application starts
- Populate the Table with the returned data from the query

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/run-on-load-toggle.png" alt="Run And Preview" />
</div>

## Writing Data

In the previous example, we utilized a REST API as our data source. For the rest of this guide, we'll switch to using a table from ToolJet's **[Database](/docs/tooljet-database)** as our data source.

The table is named *dummyDB* and has three columns:
- **id** field which is autogenerated as the primary key/unique identifier,
- **name** field with **varchar** as type,
- and **age** field with **int** as type

Let's see how we can create a query that writes data to the database.

- **Create A New Query**: Click on the **+ Add** button located in the Query Panel.
- **Choose Data Source**: Scroll through the list and select **ToolJet Database**.
- **Select Table**: Choose *dummyDB* as the table name.
- **Set Operation**: Pick **Create row** from the Operations dropdown menu.
- **Add Columns**: Click on **+ Add column** to insert new columns. Add **John Doe** as the key for name column and **33** as the key for age column.
- **Rename Query**: Change the query name to **writeData**.


<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/add-query.png" alt="Add Query" />
</div>

Now every time we click on the **Run** button, the data that we have mapped to the columns will be written to our *dummyDB* table. 

Let's click on run three times - three rows will be created in the database with the same name and age, but the **id** field will be different for each row since it is autogenerated to create a unique identifier.

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/database-table.png" alt="Database Table" />
</div>

## Updating Data

Let's see how we can update the data in our database table.

- **Create A New Query**: Hit the **+ Add** button found in the Query Panel.
- **Choose Data Source**: Scroll through the list and select **ToolJet Database**.
- **Select Table**: Choose *dummyDB* as the table name.
- **Set Operation**: Pick **Update rows** from the Operations dropdown menu.
- **Set Filter**: Click on **+ Add Condition** next to Filter, and select **id** as the column, **equals** as the operation and input **1** as the key.
- **Add Columns**: Press **+ Add Column** to create new rows. Use **Jack Doe** as the key for the name column and **44** as the key for the age column.
- **Rename Query**: Change the query name to **updateData**.

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/update-query.png" alt="Update Query" />
</div>

When we click the **Run** button, the filter condition will select the row where the **id** is 1. Subsequently, the database table will update to reflect the new values specified in the keys.

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/updated-table.png" alt="Updated Table" />
</div>

## Deleting Data

To delete the data, create another query and rename it to *deleteData*.

- **Create A New Query**: Hit the **+ Add** button found in the Query Panel.
- **Choose Data Source**: Scroll through the list and select **ToolJet Database**.
- **Select Table**: Choose *dummyDB* as the table name.
- **Set Operation**: Select **Delete rows** from the Operations dropdown.
- **Set Filter**: Click on **+ Add Condition** next to Filter, and select **id** as the column, **equals** as the operation and input **1** as they key.
- **Rename Query**: Change the query name to **deleteData**.

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/delete-query.png" alt="Delete Query" />
</div>

Now when we click on the **Run** button, the row with **1** as the **id** will be deleted.  

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/table-after-delete.png" alt="Table After Running Delete Query" />
</div>

## Using Queries With Components

Data returned from queries can be accessed using the **queries** key inside curly braces. 

For e.g. `{{queries.queryname.data}}`

Let's use the data fetched using the *getProducts* query in a Table component. Drag and drop a **[Table](/docs/widgets/table)** component on the canvas. Go to its configuration panel on the right and enter the below code under the **Table data** property:

```js
{{queries.getProducts.data.products}}
```

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/load-data-to-table.png" alt="Load Data To Table" />
</div>

Enabling the **Run this query on load?** setting for the *getProducts* query in this case would ensure that the query automatically runs when the application starts and the fetched data will be loaded in the Table component.

Let's also see how we can refer component values to queries. Delete the Table component and drag and drop a **[Form](/docs/widgets/form)** component from the component library. 

In the *writeData* query, replace the value for **name** column's key with the below code. 

```js
{{components.form1.data.textinput1.value}}
```

Similarly, replace the value for **age** column's key with the below code:

```js
{{components.form1.data.numberinput1.value}}
```

<i> We can access all the values related to components using the <b>components</b> key.</i>

<br/>
<br/>

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/component-value-to-query.png" alt="Data Written On Button Trigger" />
</div>

There are two input fields in the Form component. Every time this query runs, the values in the Form's input fields will be written to the database. Enter **Developer** in the name input field and **24** in the age input field.  

Let's create a way to trigger this query on press of a button. Select the **[Button](/docs/widgets/button)** component/submit button on the Form, navigate to its configuration panel on the right and click on **+ Add handler** under events. 

Configure the event based on the below table:

| Property | Value     |
| :------- | :-------- |
| Event    | On click  |
| Action   | Run Query |
| Query    | *writeData*|

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/button-event-handler.png" alt="Button Event Handler Config" />
</div>


Now the *writeData* query will run every time we click on the submit button. Click on submit once and the data in the input fields will be written to our databse table.

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/write-data-with-button.png" alt="Data Written On Button Trigger" />
</div>

We can apply the same principles to *updateData* and *deleteData* queries. 

## Confirmation Before Running

Enabling **Request confirmation before running query?** will load a confirmation pop-up every time the query gets executed. 

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/request-confirmation.gif" alt="Query Confirmation" />
</div>

## Notification On Success

The **Show notification on success?** setting allows us to setup a notification that displays when the query is executed. We can define the **Success Message** text and **Notification duration** after enabling this setting. 

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/success-notification.gif" alt="Success Notification" />
</div>


## Event Handlers In Queries

Two types of event handlers can be triggered upon query completion: **Query Success** and **Query Failure**. These handlers can run a variety of **[Actions](https://docs.tooljet.com/docs/category/actions-reference)** based on query success or failure. **Run Query** is the most commonly used **Action** .

For instance, consider a scenario where data is displayed in a Table component using the *getData* query. The same data gets modified later on by the *updateData* query. To automatically display the modified data on our Table component, the **Run Query** action is useful. In *updateData* query's settings, we can set *getData* query to run on **Query Success**. 

<div style={{textAlign: 'center'}}>
    <img style={{padding: '10px'}} className="screenshot-full" src="/img/tooljet-concepts/working-with-queries/run-query-event-handler.png" alt="Run Query Event Handler" />
</div>

Consider this a way to automatically reload data. 

This concludes our basic overview of queries in ToolJet App-Builder. However, the possibilities extend far beyond these fundamentals. We can fetch, combine and manipulate data from various other data sources and integrate with a wide range of APIs and services.




